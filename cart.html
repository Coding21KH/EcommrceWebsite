<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart | Restart Repairs</title>
    <style>
        * { box-sizing: border-box; margin:0; padding:0; }
        body { background:#1e1e24; color:white; font-family: 'Segoe UI', sans-serif; }
        header { background:white; padding:15px 5%; display:flex; justify-content:space-between; align-items:center; }
        .logo { color:black; font-weight:800; font-size:1.5rem; text-decoration:none; }
        .logo span { color:#0082ff; }
        main { max-width:1000px; margin:40px auto; padding:0 5%; }
        h1 { margin-bottom:30px; }
        .cart-item { display:flex; align-items:center; gap:20px; padding:20px; background:rgba(255,255,255,0.05); border-radius:15px; margin-bottom:15px; border:1px solid rgba(255,255,255,0.1); }
        .cart-item img { width:120px; height:120px; object-fit:cover; border-radius:10px; }
        .details { flex:1; }
        .price { color:#00ff88; font-size:1.3rem; font-weight:bold; margin:8px 0; }
        .remove-btn { background:#ff4d4d; color:white; border:none; padding:10px 16px; border-radius:50px; cursor:pointer; font-weight:bold; transition:0.2s; }
        .remove-btn:hover { background:#ff3333; }
        .total-box { background:rgba(0,130,255,0.1); padding:25px; border-radius:15px; margin-top:30px; text-align:right; }
        .total-box h2 { color:#0082ff; }
        .checkout-btn { background:#0082ff; color:white; border:none; padding:18px 40px; border-radius:50px; font-size:1.2rem; font-weight:bold; cursor:pointer; margin-top:20px; }
        .empty { text-align:center; padding:60px; opacity:0.7; }
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="logo">RESTART <span>REPAIRS</span></a>
        <nav>
            <a href="wishlist.html" style="color:black; margin-right:20px; text-decoration:none;">Wishlist</a>
            <a href="cart.html" style="color:black; text-decoration:none;">Cart</a>
        </nav>
    </header>

    <main>
        <h1>Your Cart</h1>
        <div id="cart-items"></div>
        <div id="cart-total-box" class="total-box" style="display:none;">
            <h2>Total: <span id="cart-total">$0.00</span></h2>
            <button class="checkout-btn" onclick="window.location.href='checkout.html'">Proceed to Checkout</button>
        </div>
        <div id="empty-cart" class="empty" style="display:none;">
            <h2>Your cart is empty</h2>
            <p>Continue shopping and add some powerful rigs to your cart!</p>
            <a href="wishlist.html" style="color:#0082ff; text-decoration:none;">Back to Wishlist</a>
        </div>
    </main>

    <script>
        function renderCart() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const container = document.getElementById('cart-items');
            container.innerHTML = '';

            if (cart.length === 0) {
                document.getElementById('empty-cart').style.display = 'block';
                document.getElementById('cart-total-box').style.display = 'none';
                return;
            }

            document.getElementById('empty-cart').style.display = 'none';
            document.getElementById('cart-total-box').style.display = 'block';

            let total = 0;

            cart.forEach((item, index) => {
                total += item.price;

                const div = document.createElement('div');
                div.className = 'cart-item';
                div.innerHTML = `
                    <img src="${item.image}" alt="${item.name}">
                    <div class="details">
                        <h3>${item.name}</h3>
                        <div class="price">$${item.price.toLocaleString('en-US', {minimumFractionDigits: 2})}</div>
                    </div>
                    <button class="remove-btn" data-index="${index}">Remove</button>
                `;
                container.appendChild(div);
            });

            document.getElementById('cart-total').textContent = 
                `$${total.toLocaleString('en-US', {minimumFractionDigits: 2})}`;

            // Attach remove listeners
            document.querySelectorAll('.remove-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const idx = parseInt(btn.dataset.index);
                    cart.splice(idx, 1);
                    localStorage.setItem('cart', JSON.stringify(cart));
                    renderCart(); // refresh
                });
            });
        }

        // Load cart on page open
        renderCart();
    </script>
</body>
</html>
